<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><link rel="canonical" href="https://Tea-n-Tech.github.io/professional-python-exercises-2-githubCLI/source_code/" />
      <link rel="shortcut icon" href="../img/favicon.ico" />
    <title>Source Code - GithubCLI</title>
    <link rel="stylesheet" href="../css/theme.css" />
    <link rel="stylesheet" href="../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/styles/github.min.css" />
        <link href="../assets/_mkdocstrings.css" rel="stylesheet" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "Source Code";
        var mkdocs_page_input_path = "source_code.md";
        var mkdocs_page_url = "/professional-python-exercises-2-githubCLI/source_code/";
      </script>
    
    <script src="../js/jquery-3.6.0.min.js" defer></script>
    <!--[if lt IE 9]>
      <script src="../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/highlight.min.js"></script>
      <script>hljs.initHighlightingOnLoad();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href=".." class="icon icon-home"> GithubCLI
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="..">Home</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../quick_start/">Quick-Start</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../faq/">FAQ</a>
                </li>
              </ul>
              <ul class="current">
                <li class="toctree-l1 current"><a class="reference internal current" href="./">Source Code</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#professional_python_exercises_2_githubcli.github_cli">professional_python_exercises_2_githubcli.github_cli</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#professional_python_exercises_2_githubcli.github_cli.countstars">countstars()</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#professional_python_exercises_2_githubcli.github_cli.get_github_token">get_github_token()</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#professional_python_exercises_2_githubcli.github_cli.get_user_form_input">get_user_form_input()</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#professional_python_exercises_2_githubcli.github_cli.getdetails">getdetails()</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#professional_python_exercises_2_githubcli.github_cli.setstatus">setstatus()</a>
    </li>
    </ul>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../coverage/">Coverage report</a>
                </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="..">GithubCLI</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href=".." class="icon icon-home" alt="Docs"></a> &raquo;</li>
      <li>Source Code</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="source-code">Source Code</h1>


<div class="doc doc-object doc-module">


<a id="professional_python_exercises_2_githubcli.github_cli"></a>
  <div class="doc doc-contents first">

  

  <div class="doc doc-children">









<div class="doc doc-object doc-function">



<h2 id="professional_python_exercises_2_githubcli.github_cli.countstars" class="doc doc-heading">
<code class="highlight language-python"><span class="n">countstars</span><span class="p">(</span><span class="n">json_format</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></code>

</h2>


  <div class="doc doc-contents ">
  
      <p>Counts the stars of a specified user and gives a nice comment to the user</p>

<details class="json_format-">
  <summary>Optional[bool] = False</summary>
  <p>decides wether json or plain text format is required</p>
</details>
<details class="starcount-">
  <summary>int</summary>
  <p>number of stars</p>
</details>
      <details class="quote">
        <summary>Source code in <code>professional_python_exercises_2_githubcli\github_cli.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@app</span><span class="o">.</span><span class="n">command</span><span class="p">()</span>
<span class="k">def</span> <span class="nf">countstars</span><span class="p">(</span><span class="n">json_format</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Counts the stars of a specified user and gives a nice comment to the user</span>

<span class="sd">    Parameters:</span>
<span class="sd">    json_format : Optional[bool] = False</span>
<span class="sd">      decides wether json or plain text format is required</span>

<span class="sd">    Returns:</span>
<span class="sd">    starCount : int</span>
<span class="sd">      number of stars</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">typer</span><span class="o">.</span><span class="n">echo</span><span class="p">(</span><span class="s2">&quot;Enter user to count stars for.&quot;</span><span class="p">)</span>
    <span class="n">user</span> <span class="o">=</span> <span class="n">get_user_form_input</span><span class="p">()</span>
    <span class="n">name</span> <span class="o">=</span> <span class="n">user</span><span class="o">.</span><span class="n">name</span>

    <span class="n">repositories</span> <span class="o">=</span> <span class="n">user</span><span class="o">.</span><span class="n">get_repos</span><span class="p">()</span>
    <span class="n">star_count</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">for</span> <span class="n">repo</span> <span class="ow">in</span> <span class="n">repositories</span><span class="p">:</span>
        <span class="n">stars</span> <span class="o">=</span> <span class="n">repo</span><span class="o">.</span><span class="n">stargazers_count</span>
        <span class="n">star_count</span> <span class="o">+=</span> <span class="n">stars</span>
    <span class="k">if</span> <span class="n">json_format</span><span class="p">:</span>
        <span class="n">output</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">output</span><span class="p">[</span><span class="s2">&quot;username&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">name</span>
        <span class="n">output</span><span class="p">[</span><span class="s2">&quot;stars&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">star_count</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">output</span><span class="p">))</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">typer</span><span class="o">.</span><span class="n">echo</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;User: </span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2"> has </span><span class="si">{</span><span class="n">star_count</span><span class="si">}</span><span class="s2">‚≠ê in </span><span class="si">{</span><span class="n">repositories</span><span class="o">.</span><span class="n">totalCount</span><span class="si">}</span><span class="s2"> repositories.&quot;</span><span class="p">)</span>
        <span class="n">typer</span><span class="o">.</span><span class="n">echo</span><span class="p">(</span><span class="n">_rate_stars_to_repos</span><span class="p">(</span><span class="n">star_count</span><span class="p">,</span> <span class="n">repositories</span><span class="o">.</span><span class="n">totalCount</span><span class="p">))</span>
    <span class="k">return</span> <span class="n">star_count</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h2 id="professional_python_exercises_2_githubcli.github_cli.get_github_token" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_github_token</span><span class="p">()</span></code>

</h2>


  <div class="doc doc-contents ">
  
      <p>Checks, if API Key is set as an environment variable. If not, the user is
asked to input it in the console. Length checks enabled for the API key. If
key has non-valid length (!=32) the user is asked again to enter a valid key.
The key is saved into a local .env file.</p>

<details class="github_token-">
  <summary>str</summary>
  <p>API Key for the Open Weather Map</p>
</details>
      <details class="quote">
        <summary>Source code in <code>professional_python_exercises_2_githubcli\github_cli.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">get_github_token</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Checks, if API Key is set as an environment variable. If not, the user is</span>
<span class="sd">    asked to input it in the console. Length checks enabled for the API key. If</span>
<span class="sd">    key has non-valid length (!=32) the user is asked again to enter a valid key.</span>
<span class="sd">    The key is saved into a local .env file.</span>
<span class="sd">    Returns:</span>
<span class="sd">    github_token : str</span>
<span class="sd">      API Key for the Open Weather Map</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">dotenv_file</span> <span class="o">=</span> <span class="n">dotenv</span><span class="o">.</span><span class="n">find_dotenv</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">dotenv_file</span> <span class="o">==</span> <span class="s2">&quot;&quot;</span><span class="p">:</span>
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">getcwd</span><span class="p">()</span> <span class="o">+</span> <span class="s2">&quot;</span><span class="se">\\</span><span class="s2">.env&quot;</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s2">&quot;w&quot;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s2">&quot;utf-8&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">close</span><span class="p">():</span>
            <span class="k">pass</span>
        <span class="n">dotenv_file</span> <span class="o">=</span> <span class="n">dotenv</span><span class="o">.</span><span class="n">find_dotenv</span><span class="p">()</span>
    <span class="n">dotenv</span><span class="o">.</span><span class="n">load_dotenv</span><span class="p">(</span><span class="n">dotenv_file</span><span class="p">)</span>

    <span class="k">if</span> <span class="s2">&quot;TNT_EX2_GITHUB_TOKEN&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span>
            <span class="s2">&quot;No API Key found in your environment variables. </span><span class="se">\n</span><span class="s2">Please look at &quot;</span>
            <span class="s2">&quot;https://github.com/settings/tokens for getting an API key and enter &quot;</span>
            <span class="s2">&quot;it in the following line:&quot;</span><span class="p">,</span>
            <span class="n">file</span><span class="o">=</span><span class="n">sys</span><span class="o">.</span><span class="n">stderr</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s2">&quot;TNT_EX2_GITHUB_TOKEN&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s2">&quot;Please enter your API Key now: </span><span class="se">\n</span><span class="s2">--&gt;&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
    <span class="n">api_key</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s2">&quot;TNT_EX2_GITHUB_TOKEN&quot;</span><span class="p">]</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">api_key</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">40</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span>
            <span class="s2">&quot;Wrong sized GitHub Accoss Token inputted (correct length: 40), &quot;</span>
            <span class="sa">f</span><span class="s2">&quot;key found: </span><span class="si">{</span><span class="n">api_key</span><span class="si">}</span><span class="s2">, </span><span class="se">\n</span><span class="s2">please look at https://github.com/settings/tokens &quot;</span>
            <span class="s2">&quot;for getting an API key and enter it in the following line:&quot;</span><span class="p">,</span>
            <span class="n">file</span><span class="o">=</span><span class="n">sys</span><span class="o">.</span><span class="n">stderr</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s2">&quot;TNT_EX2_GITHUB_TOKEN&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s2">&quot;Please enter your API Key now:</span><span class="se">\n</span><span class="s2">--&gt;&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">get_github_token</span><span class="p">()</span>

    <span class="n">dotenv</span><span class="o">.</span><span class="n">set_key</span><span class="p">(</span><span class="n">dotenv_file</span><span class="p">,</span> <span class="s2">&quot;TNT_EX2_GITHUB_TOKEN&quot;</span><span class="p">,</span> <span class="n">api_key</span><span class="p">)</span>  <span class="c1"># save the API key to .env file</span>
    <span class="k">return</span> <span class="n">api_key</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h2 id="professional_python_exercises_2_githubcli.github_cli.get_user_form_input" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_user_form_input</span><span class="p">()</span></code>

</h2>


  <div class="doc doc-contents ">
  
      <p>Method used in the app commands to get the user from user input:</p>
      <p>user : NamedUser</p>

      <details class="quote">
        <summary>Source code in <code>professional_python_exercises_2_githubcli\github_cli.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">get_user_form_input</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n">NamedUser</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Method used in the app commands to get the user from user input:</span>

<span class="sd">    Returns:</span>
<span class="sd">    user : NamedUser</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">name</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s2">&quot;User: &quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">name</span> <span class="o">==</span> <span class="s2">&quot;&quot;</span><span class="p">:</span>
        <span class="n">typer</span><span class="o">.</span><span class="n">echo</span><span class="p">(</span><span class="s2">&quot;Empty Value inputted, try again&quot;</span><span class="p">)</span>
        <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">(</span><span class="s2">&quot;Failed to get user input&quot;</span><span class="p">)</span>
    <span class="n">token</span> <span class="o">=</span> <span class="n">get_github_token</span><span class="p">()</span>
    <span class="n">github_session</span> <span class="o">=</span> <span class="n">Github</span><span class="p">(</span><span class="n">token</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">github_session</span><span class="o">.</span><span class="n">search_users</span><span class="p">(</span><span class="n">name</span><span class="p">)</span><span class="o">.</span><span class="n">totalCount</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
        <span class="n">typer</span><span class="o">.</span><span class="n">echo</span><span class="p">(</span><span class="s2">&quot;User not found, please try again.&quot;</span><span class="p">)</span>
        <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">(</span><span class="s2">&quot;Failed to find user.&quot;</span><span class="p">)</span>
    <span class="n">user</span> <span class="o">=</span> <span class="n">github_session</span><span class="o">.</span><span class="n">get_user</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">user</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h2 id="professional_python_exercises_2_githubcli.github_cli.getdetails" class="doc doc-heading">
<code class="highlight language-python"><span class="n">getdetails</span><span class="p">(</span><span class="n">json_format</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></code>

</h2>


  <div class="doc doc-contents ">
  
      <p>Gets the details for a specified user.</p>

<details class="json_format">
  <summary>Optional[bool] = False</summary>
  <p>Decides wether nomal text output or json is required</p>
</details>
<details class="raw-">
  <summary>json</summary>
  <p>Raw details in json format fron the get details request</p>
</details>
      <details class="quote">
        <summary>Source code in <code>professional_python_exercises_2_githubcli\github_cli.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@app</span><span class="o">.</span><span class="n">command</span><span class="p">()</span>
<span class="k">def</span> <span class="nf">getdetails</span><span class="p">(</span><span class="n">json_format</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">json</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Gets the details for a specified user.</span>

<span class="sd">    Parameters:</span>
<span class="sd">    json_format: Optional[bool] = False</span>
<span class="sd">      Decides wether nomal text output or json is required</span>

<span class="sd">    Returns:</span>
<span class="sd">    raw : json</span>
<span class="sd">      Raw details in json format fron the get details request</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">typer</span><span class="o">.</span><span class="n">echo</span><span class="p">(</span><span class="s2">&quot;Enter user to get details for.&quot;</span><span class="p">)</span>
    <span class="n">user</span> <span class="o">=</span> <span class="n">get_user_form_input</span><span class="p">()</span>
    <span class="n">name</span> <span class="o">=</span> <span class="n">user</span><span class="o">.</span><span class="n">name</span>
    <span class="n">typer</span><span class="o">.</span><span class="n">echo</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Getting the detials for: </span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="n">bio</span> <span class="o">=</span> <span class="n">user</span><span class="o">.</span><span class="n">bio</span>
    <span class="n">repocount</span> <span class="o">=</span> <span class="n">user</span><span class="o">.</span><span class="n">get_repos</span><span class="p">()</span><span class="o">.</span><span class="n">totalCount</span>
    <span class="n">star_count</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">for</span> <span class="n">repo</span> <span class="ow">in</span> <span class="n">user</span><span class="o">.</span><span class="n">get_repos</span><span class="p">():</span>
        <span class="n">stars</span> <span class="o">=</span> <span class="n">repo</span><span class="o">.</span><span class="n">stargazers_count</span>
        <span class="n">star_count</span> <span class="o">+=</span> <span class="n">stars</span>
    <span class="n">followers</span> <span class="o">=</span> <span class="n">user</span><span class="o">.</span><span class="n">get_followers</span><span class="p">()</span>
    <span class="n">following</span> <span class="o">=</span> <span class="n">user</span><span class="o">.</span><span class="n">get_following</span><span class="p">()</span>
    <span class="n">blog</span> <span class="o">=</span> <span class="n">user</span><span class="o">.</span><span class="n">blog</span>
    <span class="n">company</span> <span class="o">=</span> <span class="n">user</span><span class="o">.</span><span class="n">company</span>
    <span class="n">contributions</span> <span class="o">=</span> <span class="n">user</span><span class="o">.</span><span class="n">contributions</span>
    <span class="n">created</span> <span class="o">=</span> <span class="n">user</span><span class="o">.</span><span class="n">created_at</span>
    <span class="n">email</span> <span class="o">=</span> <span class="n">user</span><span class="o">.</span><span class="n">email</span>
    <span class="n">organizations</span> <span class="o">=</span> <span class="n">user</span><span class="o">.</span><span class="n">get_orgs</span><span class="p">()</span>
    <span class="n">avatar_url</span> <span class="o">=</span> <span class="n">user</span><span class="o">.</span><span class="n">avatar_url</span>
    <span class="n">starred</span> <span class="o">=</span> <span class="n">user</span><span class="o">.</span><span class="n">get_starred</span><span class="p">()</span>
    <span class="n">subs</span> <span class="o">=</span> <span class="n">user</span><span class="o">.</span><span class="n">get_subscriptions</span><span class="p">()</span>
    <span class="n">watched</span> <span class="o">=</span> <span class="n">user</span><span class="o">.</span><span class="n">get_watched</span><span class="p">()</span>
    <span class="n">location</span> <span class="o">=</span> <span class="n">user</span><span class="o">.</span><span class="n">location</span>
    <span class="n">hireable</span> <span class="o">=</span> <span class="n">user</span><span class="o">.</span><span class="n">hireable</span>

    <span class="n">raw</span> <span class="o">=</span> <span class="n">user</span><span class="o">.</span><span class="n">raw_data</span>

    <span class="k">if</span> <span class="n">json_format</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">raw</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">typer</span><span class="o">.</span><span class="n">echo</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Details about user:</span><span class="si">{</span><span class="n">user</span><span class="si">}</span><span class="s2">, created at </span><span class="si">{</span><span class="n">created</span><span class="si">}</span><span class="s2">, bio: </span><span class="si">{</span><span class="n">bio</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="n">typer</span><span class="o">.</span><span class="n">echo</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;Stars: </span><span class="si">{</span><span class="n">star_count</span><span class="si">}</span><span class="s2">, repos: </span><span class="si">{</span><span class="n">repocount</span><span class="si">}</span><span class="s2">, followers: </span><span class="si">{</span><span class="n">followers</span><span class="o">.</span><span class="n">totalCount</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="sa">f</span><span class="s2">&quot;, following: </span><span class="si">{</span><span class="n">following</span><span class="o">.</span><span class="n">totalCount</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="p">)</span>
        <span class="n">typer</span><span class="o">.</span><span class="n">echo</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;Contributions: </span><span class="si">{</span><span class="n">contributions</span><span class="si">}</span><span class="s2">, orgs: </span><span class="si">{</span><span class="n">organizations</span><span class="o">.</span><span class="n">totalCount</span><span class="si">}</span><span class="s2">,&quot;</span>
            <span class="sa">f</span><span class="s2">&quot; starred: </span><span class="si">{</span><span class="n">starred</span><span class="o">.</span><span class="n">totalCount</span><span class="si">}</span><span class="s2">, subs: </span><span class="si">{</span><span class="n">subs</span><span class="o">.</span><span class="n">totalCount</span><span class="si">}</span><span class="s2">,&quot;</span>
            <span class="sa">f</span><span class="s2">&quot; watched: </span><span class="si">{</span><span class="n">watched</span><span class="o">.</span><span class="n">totalCount</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="p">)</span>
        <span class="n">typer</span><span class="o">.</span><span class="n">echo</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Get a visual impression at:</span><span class="si">{</span><span class="n">avatar_url</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="n">typer</span><span class="o">.</span><span class="n">echo</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;The blog: </span><span class="si">{</span><span class="n">blog</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="n">typer</span><span class="o">.</span><span class="n">echo</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Mail: </span><span class="si">{</span><span class="n">email</span><span class="si">}</span><span class="s2">, hireable: </span><span class="si">{</span><span class="n">hireable</span><span class="si">}</span><span class="s2">, location: </span><span class="si">{</span><span class="n">location</span><span class="si">}</span><span class="s2">, company: </span><span class="si">{</span><span class="n">company</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">raw</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h2 id="professional_python_exercises_2_githubcli.github_cli.setstatus" class="doc doc-heading">
<code class="highlight language-python"><span class="n">setstatus</span><span class="p">()</span></code>

</h2>


  <div class="doc doc-contents ">
  
      <p>Sets the status to something related to this repository: Drinking tea.</p>

<details class="success-">
  <summary>bool</summary>
  <p>success if successful status change could be accomplished</p>
</details>
      <details class="quote">
        <summary>Source code in <code>professional_python_exercises_2_githubcli\github_cli.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@app</span><span class="o">.</span><span class="n">command</span><span class="p">()</span>
<span class="k">def</span> <span class="nf">setstatus</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Sets the status to something related to this repository: Drinking tea.</span>
<span class="sd">    Returns:</span>
<span class="sd">    success : bool</span>
<span class="sd">      success if successful status change could be accomplished</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">mutation</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;mutation {</span>
<span class="s2">    changeUserStatus(input:{emoji:&quot;:tea:&quot;, message:&quot;Drinking tea&quot;}) {</span>
<span class="s2">        status{</span>
<span class="s2">            emoji</span>
<span class="s2">            message</span>
<span class="s2">        }</span>
<span class="s2">    }</span>
<span class="s2">    }</span>
<span class="s2">    &quot;&quot;&quot;</span>
    <span class="n">headers</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;Authorization&quot;</span><span class="p">:</span> <span class="sa">f</span><span class="s2">&quot;token </span><span class="si">{</span><span class="n">get_github_token</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">}</span>
    <span class="n">request</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">post</span><span class="p">(</span>
        <span class="s2">&quot;https://api.github.com/graphql&quot;</span><span class="p">,</span> <span class="n">json</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;query&quot;</span><span class="p">:</span> <span class="n">mutation</span><span class="p">},</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="mi">30</span>
    <span class="p">)</span>
    <span class="k">if</span> <span class="n">request</span><span class="o">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="mi">200</span><span class="p">:</span>
        <span class="n">typer</span><span class="o">.</span><span class="n">echo</span><span class="p">(</span><span class="s2">&quot;Success&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="kc">True</span>
    <span class="n">typer</span><span class="o">.</span><span class="n">echo</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Mutation failed to run by returning code of </span><span class="si">{</span><span class="n">request</span><span class="o">.</span><span class="n">status_code</span><span class="si">}</span><span class="s2">. </span><span class="si">{</span><span class="n">mutation</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="kc">False</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>



  </div>

  </div>

</div>
              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href="../faq/" class="btn btn-neutral float-left" title="FAQ"><span class="icon icon-circle-arrow-left"></span> Previous</a>
        <a href="../coverage/" class="btn btn-neutral float-right" title="Coverage report">Next <span class="icon icon-circle-arrow-right"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
      <span><a href="../faq/" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="../coverage/" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script>var base_url = '..';</script>
    <script src="../js/theme_extra.js" defer></script>
    <script src="../js/theme.js" defer></script>
      <script src="../search/main.js" defer></script>
    <script defer>
        window.onload = function () {
            SphinxRtdTheme.Navigation.enable(true);
        };
    </script>

</body>
</html>
